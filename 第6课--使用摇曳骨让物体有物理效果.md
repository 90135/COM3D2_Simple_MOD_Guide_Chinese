# 第 6 课，使用摇曳骨让物体有物理效果

在做头发、耳坠之类的东西的时候，我们希望这个物体能受到物理效果，而不是静止不动。

COM3D2 使用的是 Unity 的 [Dynamic Bone 插件](https://assetstore.unity.com/packages/tools/animation/dynamic-bone-16743)

我们的游戏使用此插件做一些物理效果，然后做了一层封装，称为摇曳骨，也就是 yure bone。（也称为 Dynamic Bones 动态骨骼）

<br>

因此摇曳骨的参数怎么调可以参考此插件的相关教程，比如这位大佬的心得：[https://forum.gamer.com.tw/Co.php?bsn=60602&sn=5966](https://forum.gamer.com.tw/Co.php?bsn=60602&sn=5966)

在游戏内调整摇曳骨效果需要使用 DynBoneEdit 这个插件：[https://ux.getuploader.com/trzr_tool/download/26](https://ux.getuploader.com/trzr_tool/download/26)

<details>

<summary>版本前瞻</summary>

在 COM3D2.5 v3.41.0 的时候，游戏从 Unity 5.6.4 升级到了 Unity 2022.3.35

而且此版本添加了这个 unity 插件：[Magica Cloth 2](https://assetstore.unity.com/packages/tools/physics/magica-cloth-2-242307)

因此，以后可能会有更好的办法去做物理效果。

注意：仅 COM3D2.5

COM3D2 并没有更换游戏引擎版本。

这说明 KISS 我们维护了一个 MOD 插件支持版本，泪目了。

</details>


待续


### 游戏如何读取 .phy 和 .col

我们的 Blender CM3D2 插件会将去掉序号（foobar.001 -> foobar）以后的物体名称（黄色倒三角）写到 .model 的第二个字符串中。

然后游戏会将 .model 中的第二个字符串设置为 gameObject 的名称，游戏内的大部分对模型的操作都是基于 gameObject 的。

![9fdd07eacbef60b3282d91b2fd0254f1](https://github.com/user-attachments/assets/330493a6-ea53-4df6-9a53-d5f82f4d057b)

在加载模型时，游戏会尝试读取 gameObject名称 + .phy 的文件，然后去读取 .phy 中的碰撞器文件名，如果 .phy 中未指定碰撞器文件名，那么还会尝试去读取 gameObject名称 + .col 的碰撞器文件，如果指定了就会读取指定的 文件名 + .col。

![图片](https://github.com/user-attachments/assets/383fd59b-637d-4b4b-9a09-879022d1cc4c)

如果对应名称的 .phy 不存在，游戏还会尝试读取各个部位默认的 .phy 和 .col 文件。


